<h4>Grad der Kontinuit&auml;t bezogen auf Zeitspanne</h4>

<p>Berechnet den Grad der Kontinuit&auml;t &uuml;ber eine vergangene Zeitspanne eines Indikators als Pearson Korrelation bei einer linearen Regression &uuml;ber die betrachtete Zeitspanne.</p>
	<p id="scriptFormulaExplanation" ng-model="$ctrl.kommonitorScriptHelperServiceInstance.scriptFormulaExplanation" ng-init="$ctrl.kommonitorScriptHelperServiceInstance.styleMathFormula_forExplanation('scriptFormulaExplanation')">
		<b><i><u>Formel:</u></i></b> $$ r = \frac{\sum_{n=1}^{m}((A_{n} - \bar{A}) \times (I_{n} - \bar{I}))}{\sqrt{\sum_{n=1}^{m} (A_{n} - \bar{A})^2 \times \sum_{n=1}^{m} (I_{n} - \bar{I})^2}} $$ 
		mit
		<br/>
		$r$ = Korrelationskoeffizient nach Pearson bei linearer Regression &uuml;ber die betrachtete Zeitspanne  		
		<br/>
		$m$ = Anzahl konsekutiver vergangener Tage/Monate/Jahre 
		<br/>
		$A_{n}$ = aufeinander folgende Jahre
		<br/>
		$\bar{A}$ = arithmetisches Mittel der aufeinander folgenden Jahre
		<br/>
		$I_{n}$ = Indikatorenwerte der aufeinander folgenden Jahre
		<br/>
		$\bar{I}$ = arithmetisches Mittel der Indikatorenwerte der aufeinander folgenden Jahre
	</p>

	<div class="row vertical-align">
		<div class="col-md-10 col-sm-12 col-xs-12">
			<!-- <div style="text-align: left;"> -->
			<div class="box box-danger collapsed-box" style="background: #ebf0fd;">
				<div class="box-header">
					<h3 class="box-title">Notwendiger Basis-Indikator</h3>
	
					<div class="box-tools pull-right">
						<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
						</button>
					</div>
				</div>
				<!-- /.box-header -->
				<div class="box-body">
	
					<!-- Inputs for new reference -->
	
					<div class="row vertical-align">
						<div class="col-md-12 col-sm-12 col-xs-12">
							<div class="form-group">
								<label>Auswahl des f&uuml;r die Berechnung erforderlichen Basis-Indikators</label>
								<div class="input-group">
									<span class="input-group-addon"><i class="fas fa-filter"></i></span>
									<input type="text" class="form-control input-sm" placeholder="Stichwortfilter" ng-model-options="{debounce: 500, blur: 0}"
										ng-model="indicatorNameFilter_compIndicator">
								</div>
								<br />
								<select ng-model="compIndicatorSelection" size="5" ng-change="onChangeComputationIndicator(compIndicatorSelection)"
									ng-options="indicatorMetadata as indicatorMetadata.indicatorName for indicatorMetadata in $ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:indicatorNameFilter_compIndicator"
									class="form-control">
									<option disabled selected value> -- Indikator als Berechnungsgrundlage w&auml;hlen --
									</option>
								</select>
								<div class="help-block with-errors"></div>
							</div>
						</div>
					</div>
	
					<div class="row vertical-align">
						<div class="col-md-6 col-sm-6 col-xs-12">
							<div class="form-group">
								<label>ID des selektierten Indikators</label>
								<input type="text" class="form-control input-sm" disabled placeholder="IndikatorenId"
									ng-model="compIndicatorSelection.indicatorId">
								<div class="help-block with-errors"></div>
							</div>
						</div>
						<div class="col-md-6 col-sm-6 col-xs-12">
							<div class="form-group">
								<label>Name des selektierten Indikators</label>
								<input type="text" class="form-control input-sm" disabled placeholder="IndikatorenName"
									ng-model="compIndicatorSelection.indicatorName">
								<div class="help-block with-errors"></div>
							</div>
						</div>
					</div>

					<div class="row vertical-align">
						<div class="col-md-6 col-sm-6 col-xs-12">
							<div class="form-group">
								<label>Beschreibung des selektierten Indikators</label>
								<textarea rows="4" class="form-control input-sm" disabled placeholder="IndikatorenBeschreibung"
									ng-model="compIndicatorSelection.metadata.description"></textarea>
								<div class="help-block with-errors"></div>
							</div>
						</div>
						<div class="col-md-6 col-sm-6 col-xs-12">
							<div class="form-group">
								<label>Einheit des selektierten Indikators</label>
								<input type="text" class="form-control input-sm" disabled placeholder="IndikatorenEinheit"
									ng-model="compIndicatorSelection.unit">
								<div class="help-block with-errors"></div>
							</div>
						</div>
					</div>
	
				</div>
				<!-- Box Body -->
			</div>
			<!-- Box -->
	
			<!-- </div>	 -->
	
		</div>
	
	</div>
	
<div class="row vertical-align">
	<div class="col-md-10 col-sm-12 col-xs-12">
		<!-- <div style="text-align: left;"> -->
		<div class="box box-danger collapsed-box" style="background: #ebf0fd;">
			<div class="box-header">
				<h3 class="box-title">Notwendiger zeitlicher Bezug</h3>

				<div class="box-tools pull-right">
					<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
					</button>
				</div>
			</div>
			<!-- /.box-header -->
			<div class="box-body">

				<!-- Inputs for new reference -->

				<div class="row vertical-align">
					<div class="col-md-2 col-sm-2 col-xs-12">
						<div class="form-group">
							<label>Anzahl</label>
							<br />
							<input ng-model="numberOfTemporalItems" 
							type="number" min="{{parameterNumericMinValue_numTemporalItems}}" max="{{parameterNumericMaxValue_numTemporalItems}}" 
							step="1" class="form-control input-sm"
							ng-change="onChangeNumTemporalItems()" >
							<div class="help-block with-errors"></div>
						</div>
					</div>
					<div class="col-md-3 col-sm-3 col-xs-12">
						<div class="form-group">
							<label>Art des zeitlichen Bezugs </label>
							<br />
							<select ng-model="temporalOption" size="5"
								ng-options="temporalOption as temporalOption.displayName for temporalOption in $ctrl.kommonitorScriptHelperServiceInstance.temporalOptions"
								ng-change="onChangeTemporalOption()"
								class="form-control">
								<option disabled selected value> -- Zeitbezug w&auml;hlen --
								</option>
							</select>
							<div class="help-block with-errors"></div>
						</div>
					</div>
				</div>

			</div>
			<!-- Box Body -->
		</div>
		<!-- Box -->

		<!-- </div>	 -->

	</div>

</div>


<div class="row vertical-align">
	<div class="col-md-10 col-sm-12 col-xs-12">
		<!-- <div style="text-align: left;"> -->
		<div class="box box-danger collapsed-box" style="background: #ebf0fd;">
			<div class="box-header">
				<h3 class="box-title">Skript Code - Vorschaufenster (Kontinuit&auml;t)</h3>

				<div class="box-tools pull-right">
					<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
					</button>
				</div>
			</div>
			<!-- /.box-header -->
			<div class="box-body">

				<div class="row vertical-align">
					<div class="col-md-10 col-sm-10 col-xs-12">
						<p>Der Skript Code ist vordefiniert und kann nicht editiert werden. Dieses Fenster dient lediglich der Vorschau und Nachvollziehbarkeit der Berechnungsschritte.</p>
					</div>
				</div>

				<div class="row vertical-align">
					<div class="col-md-12 col-sm-12 col-xs-12">
						<div class="form-group">
							<label>Vorschaufenster des Skript-Codes*</label>
							<br/>
							<br/>
							<pre ng-show="scriptCode_readableString_forPreview" class="prettyprint linenums" style="max-height: 450px; overflow: auto; text-align: left;" id="scriptCodePreview"><code class="language-javascript" ng-bind-html="scriptCode_readableString_forPreview"></code></pre>
						</div>
					</div>
				</div>


			</div>
			<!-- Box Body -->
		</div>
		<!-- Box -->

		<!-- </div>	 -->

	</div>
</div>	

<div class="row vertical-align">
		<div class="col-md-10 col-sm-12 col-xs-12">
			<!-- <div style="text-align: left;"> -->
			<div class="box box-info collapsed-box" style="background: #ebf0fd;">
				<div class="box-header">
					<h3 class="box-title">&Uuml;berschreiben relevanter Ziel-Indikator Metadaten (Optional)</h3>
	
					<div class="box-tools pull-right">
						<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
						</button>
					</div>
				</div>
				<!-- /.box-header -->
				<div class="box-body">

					<p>KomMonitor erlaubt es, die Berechnungs-Methodik des Ziel-Indikators zu &uuml;berschreiben. 
						Das Vorschaufenster zeigt den (editierbaren) Textbaustein. Um diesen Text als "Methodik" des Ziel-Indikators zu setzen,
						aktivieren Sie bitte den entsprechenden Schalter und registrieren das Skript. 
					</p>
	
					<div class="row vertical-align">
						<div class="col-md-6 col-sm-6 col-xs-12">
							<div class="form-group">
								<label>Editierfenster des Methodik-Textbausteins (HTML)</label>
								<br/>
								<br/>
								<textarea rows="4" ng-model="$ctrl.kommonitorScriptHelperServiceInstance.scriptFormulaHTML" ></textarea>
							</div>
							<div class="help-block">
								<p>Hinweis: KomMonitor nutzt <a target="_blank" rel="noopener noreferrer" href="https://www.mathjax.org/">MathJax und Tex-Syntax</a>, um Formeln darzustellen.
									Gem&auml;&szlig; <a target="_blank" rel="noopener noreferrer" href="https://www.mathjax.org/#demo">MathJax Demo Seite</a> wird der Formel-Code von 
									 <code>$$ ... $$</code> (Anzeige in neuer Zeile) oder <code>$ ... $</code> (Inline-Anzeige) Trennzeichen umschlossen.
								</p>
							</div>
						</div>
						<div class="col-md-6 col-sm-6 col-xs-12">
							<div class="form-group">
								<label>Vorschaufenster</label>
								<br/>
								<br/>
								<p mathjax-bind="$ctrl.kommonitorScriptHelperServiceInstance.scriptFormulaHTML"></p>
							</div>
						</div>
					</div>

					<hr>
	
					<div class="row vertical-align">
						<div class="col-md-6 col-sm-6 col-xs-12">
							<div class="form-group">
								<label>Mit diesem Textbaustein das "Methodik"-Metadatum des Ziel-Indikators &uuml;berschreiben?</label>
	
								<br/>	
								<label class="switch">
									<input type="checkbox" value="$ctrl.kommonitorScriptHelperServiceInstance.scriptFormulaHTML_overwriteTargetIndicatorMethod" ng-model="$ctrl.kommonitorScriptHelperServiceInstance.scriptFormulaHTML_overwriteTargetIndicatorMethod">
									<span class="switchslider round"></span>
								</label>
							</div>
						</div>
						<div class="col-md-6 col-sm-6 col-xs-12">
							<div class="form-group">
								<label>Derzeitiger Eintrag zum Vergleich</label>
								<br/>
								<br/>
								<p mathjax-bind="$ctrl.kommonitorScriptHelperServiceInstance.targetIndicator.processDescription"></p>
							</div>
						</div>
					</div>		
	
				</div>
				<!-- Box Body -->
			</div>
			<!-- Box -->
	
			<!-- </div>	 -->
	
		</div>

</div>