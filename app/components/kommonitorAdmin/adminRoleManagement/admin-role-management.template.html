<div id="adminRolesContent">
	<!-- Content Header (Page header) -->
	<section class="content-header">
		<h1>
			Rollenverwaltung
			<small>Rollen- und Zugriffs-Management via KeyCloak</small>
		</h1>
		
		<div class="adminTableButtonWrapper">
			<button class="btn btn-success btn-sm" type="button" data-toggle="modal"
				data-target="#modal-add-role"><i class="fas fa-plus"></i>&nbsp;&nbsp;Erstellen</button>
	
			<!-- delete selected completely -->
			<button class="btn btn-danger btn-sm" type="button" data-toggle="modal"
				data-target="#modal-delete-roles" ng-click="onClickDeleteDatasets()"><i
					class="fas fa-trash"></i>&nbsp;&nbsp;L&ouml;schen</button>
	
		</div>
	</section>

	<!-- Main content -->
	<section class="content container-fluid">
		<!--------------------------
	| Your Page Content Here |
	-------------------------->

		<div class="box box-primary">
			<div class="box-header">
				<h3 class="box-title">Rollen</h3>
			</div>
			<!-- /.box-header -->
			<div class="box-body">

				<p>KomMonitor nutzt die Open Source Software <b>Keycloak</b> zwecks Nutzer- und Rollenmanagement. 
					Die Verwaltung der Nutzer und Rollen sowie deren Zuordnung kann direkt &uuml;ber die Administrations-Oberfl&auml;che der folgenden Keycloak Instanz erfolgen:</p>

				<h4><a ng-href="{{$ctrl.kommonitorKeycloakHelperServiceInstance.targetUrlToKeycloakInstance}}" target="_blank" rel="noopener noreferrer">{{$ctrl.kommonitorKeycloakHelperServiceInstance.targetUrlToKeycloakInstance}}</a></h4>

				<p>Da die Absicherung der in der KomMonitor Datenbank gespeicherten Raumeinheiten, Indikatoren und sonstiger Georessourcen durch Kommunikation zwischen Keycloak und KomMonitor sichergestellt wird, m&uuml;ssen die <b><u><i>Rollen unter Verwendung des gleichen Namens</i></u></b> auch innerhalb der KomMonitor Datenbank registiert werden.</p>

				<p>Die nachfolgend gelisteten Rollen-Metadaten werden aus der KomMonitor Datenbank abgerufen. Die Administrations-Seiten des KomMonitor leiten die Befehle zum Erstellen, Modifizieren und L&ouml;schen der Rollen per REST Request an die Keycloak-Instanz weiter. Beispielsweise wird eine neue Rolle daher sowohl in der KomMOnitor Datenbank angelegt, als auch automatisch 
					in Keycloak registriert. Dennoch haben Sie jederzeit die M&ouml;glichkeit, die Administrations-Seiten der Keycloak-Instanz &uuml;ber obigen Link aufzurufen, um dort Anpassungen vorzunehmen.
				</p>
				<p><i>Wichtiger Hinweis: Die identische Bennenung einer Rolle innerhalb der KomMonitor datenbank und in Keycloak ist die Grundvoraussetzung zur Absicherung einzelner KomMonitor Ressourcen.</i></p>

				<div class="admin-table-wrapper">
					<table id="roleOverviewTable" datatable="ng"
						dt-options="$ctrl.kommonitorDataExchangeServiceInstance.datatablesOptions"
						class="table table-bordered table-condensed table-striped"
						style="width:100%; overflow:auto; font-size: 11px;">
						<thead>
							<tr>
								<th><input type="checkbox" ng-model="selectAllEntriesInput"
										ng-change="onChangeSelectAllEntries()"></input></th>
								<th>Editierfunktionen</th>
								<th>Id</th>
								<th>Name</th>
								<th>in KeyCloak registriert</th>
							</tr>
						</thead>

						<tbody>
							<tr ng-repeat="roleDataset in availableRoleDatasets">
								<td><input type="checkbox" ng-model="roleDataset.isSelected"
										ng-change="onChangeSelectDataset(roleDataset)"></input></td>
								<td>
									<div class="btn-group btn-group-sm">
										<button class="btn btn-warning btn-sm" type="button" data-toggle="modal"
											data-target="#modal-edit-role-metadata"
											ng-click="onClickEditMetadata(roleDataset)"
											title="Metadaten editieren"><i class="fas fa-pencil-alt"></i></button>
									</div>
								</td>
								<td>{{roleDataset.roleId}}</td>
								<td>{{roleDataset.roleName}}</td>
								<td>
									<div ng-if="roleDataset.registeredInKeyCloak"><i class="fas fa-check"></i></div>
									<div ng-if="! roleDataset.registeredInKeyCloak"><i class="fas fa-times"></i></div>
								</td>								
							</tr>

						</tbody>

						<tfoot>
							<tr>
								<th>alle selektieren</th>
								<th>Editierfunktionen</th>
								<th>Id</th>
								<th>Name</th>
								<th>in KeyCloak registriert</th>
							</tr>
						</tfoot>
					</table>

				</div>
			</div>
			<!-- /.box-body -->
		</div>
		<!-- /.box -->


	</section>
	<!-- /.content -->
</div>