<div class="modal fade" id="modal-add-admin-filter" role="dialog">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">

			<div align="center">
				<div class="loading-overlay-admin-panel ng-hide" ng-show="loadingData">
							<span class="glyphicon glyphicon-refresh icon-spin"></span>
				</div>
			</div>


			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Neuen Globalen Filter erstellen</h4>
			</div>
			<div class="modal-body">

				<!-- MultiStep Form -->
				<div class="row">
					<div class="col-md-12">
						<form class="multiStepForm form-group" id="adminFilterAddForm" role="form" data-toggle="validator" data-disable="true" style="margin-bottom: 0px;">
							<!-- progressbar -->
							<div>
								<ul id="progressbar">
									<li style="width: 25%;" class="active">Indikatoren</li>
									<li style="width: 25%;">Indikator-Themen</li>
									<li style="width: 25%;">Georesourcen</li>
									<li style="width: 25%;">Georesource-Themen</li>
								</ul>
							</div>
							
							<!-- fieldsets -->
							<fieldset>
								<h2 class="fs-title">Indikatoren</h2>
								<h3 class="fs-subtitle">Auswahl der sichtbaren Indikatoren</h3>

								<div class="row">
                  <div class="col-md-3"></div>
                  <div class="col-md-6 col-sm-6 col-xs-12">
                      <!-- <div id="spatialUnitAddRoleManagementTable" style="height: 40vh; overflow-y: auto;" class="ag-theme-alpine"></div>     -->
                      <div id="adminFilterAddIndicatorsTable" style="height: 45vh" class="ag-theme-alpine"></div>  
                    
                  </div>
                  <div class="col-md-3"></div>
                </div>	

								<input type="button" name="next" class="next next_addSpatialUnit action-button" value="N&auml;chster Schritt"/>
							</fieldset>

							<fieldset>
								<h2 class="fs-title">Allgemeine Metadaten</h2>
								<h3 class="fs-subtitle">Angaben &uuml;ber allgemeine Metadaten in KomMonitor</h3>
								<p><b><i>* = Pflichtfeld</i></b></p>

								<div class="row vertical-align">
                  
								</div>

								
								<input type="button" name="previous" class="previous previous_addSpatialUnit action-button-previous" value="Voriger Schritt"/>
								<input type="button" name="next" class="next next_addSpatialUnit action-button" value="N&auml;chster Schritt"/>
							</fieldset>
							
              <fieldset ng-if="$ctrl.kommonitorDataExchangeServiceInstance.enableKeycloakSecurity">
                <h2 class="fs-title">Rollenbasierter Zugriffsschutz</h2>
                <h3 class="fs-subtitle">Vergabe der Zugriffsrechte auf Datensatz-Metadaten und -Features pro Organisationseinheit</h3>
  
                <p>Zugriffsrechte (lesen, editieren, l&ouml;schen) m&uuml;ssen explizit vergeben werden. Administratoren (Rolle <i>kommonitor-creator</i>) haben immer vollen Zugriff.</p>
            
                  <div class="row">
                  
                  </div>	
                
                <input type="button" name="previous" class="previous previous_addSpatialUnit action-button-previous" value="Voriger Schritt"/>
                <input type="button" name="next" class="next next_addSpatialUnit action-button" value="N&auml;chster Schritt"/>
              </fieldset>						

							<fieldset>
								<div style="position: absolute;">
									<button type="button" class="btn btn-info pull-left" ng-click="onImportSpatialUnitAddMappingConfig()" title="Importieren der Mapping-Konfigurationen aus einer Datei"><i class="fas fa-file-import"></i>&nbsp;&nbsp;Mapping-Import</button>
									<input style="display:none;" class="pull-left" type="file" class="form-control" id="spatialUnitMappingConfigAddImportFile" accept=".json,"></input>
									<button type="button" style="margin-left: 6px;" class="btn btn-info pull-left" ng-click="onExportSpatialUnitAddMappingConfig()" title="Exportieren der Mapping-Konfigurationen in eine Datei"><i class="fas fa-file-export"></i>&nbsp;&nbsp;Mapping-Export</button>								
								</div>
								<h2 class="fs-title">R&auml;umlicher Datensatz</h2>
								<h3 class="fs-subtitle">Angaben &uuml;ber den r&auml;umlichen Datensatz, aus dem die Features importiert werden</h3>

								<p><b><i>* = Pflichtfeld</i></b></p>


								<div class="row vertical-align">
									
								</div>

								<input type="button" name="previous" class="previous previous_addSpatialUnit action-button-previous" value="Voriger Schritt"/>
								
							</fieldset>
						</form>
					</div>
				</div>
				<!-- /.MultiStep Form -->

			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default pull-left" data-dismiss="modal">Schlie&szlig;en</button>
	
				<button type="button" class="btn btn-success" type="submit" ng-click="addSpatialUnit()" ng-disabled="!spatialUnitLevel || !metadata.description || !metadata.datasource || !metadata.contact || !metadata.updateInterval || !metadata.lastUpdate || !spatialUnitDataSourceIdProperty || !spatialUnitDataSourceNameProperty || !periodOfValidity.startDate || spatialUnitLevelInvalid || periodOfValidityInvalid || hierarchyInvalid || !converter || !datasourceType">Raumeinheit registrieren</button>
				<button type="button" class="btn btn-danger" ng-click="resetSpatialUnitAddForm()">Zur&uuml;cksetzen</button>
			</div>

			<div id="spatialUnitAddSucessAlert" style="position: absolute; bottom: 0px; width: 100%;" hidden class="alert alert-success alert-dismissable">
                <button type="button" class="close" ng-click="hideSuccessAlert()" aria-hidden="true">&times;</button>
                <h4><i class="icon fa fa-check"></i>Raumeinheit registriert</h4>
				<p>Eine neue Raumeinheit mit Namen {{successMessagePart}} wurde in KomMonitor registriert und in die &Uuml;bersichtstabelle eingetragen.
					<div ng-if="importedFeatures && importedFeatures.length > 0">
						{{importedFeatures.length}} Features wurden dabei importiert.
					</div>
				</p>
      </div>

			<div id="spatialUnitAddErrorAlert" style="position: absolute; bottom: 0px; width: 100%;" hidden class="alert alert-danger alert-dismissable">
                <button type="button" class="close" ng-click="hideErrorAlert()" aria-hidden="true">&times;</button>
                <h4><i class="icon fa fa-ban"></i>Registrierung gescheitert</h4>
                Bei der Registrierung der Raumeinheit ist ein Fehler aufgetreten. Fehlermeldung:
								<br/>
								<pre style="overflow:auto; max-height:500px;" ng-bind-html="errorMessagePart"></pre>
								<br/>
								<br/>

								<div ng-show="importerErrors">
									<p>Bei den {{importerErrors.length}} Features mit folgenden IDs scheitert der Import:</p>
									<pre style="overflow:auto; max-height:500px;">
										<ul>
											<li ng-repeat="error in importerErrors">{{error}}</li>
										</ul>
									</pre>	
									<p>Bitte beheben Sie die angezeigten Fehler im Datensatz und wiederholen den Prozess.</p>
								</div>
      </div>


		</div>
		<!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
</div>
<!-- /.modal -->
