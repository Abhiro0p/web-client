<div class="modal fade" id="modal-add-georesource" role="dialog">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">

			<div align="center">
				<div class="loading-overlay-admin-panel ng-hide" ng-show="loadingData">
							<span class="glyphicon glyphicon-refresh icon-spin"></span>
				</div>
			</div>


			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Neue Georessource registrieren</h4>
			</div>
			<div class="modal-body">

				<p><b><i>* = Pflichtfeld</i></b></p>

				<!-- {
					  "isLOI": false,
					  "metadata": {
					    "note": "note",
					    "literature": "literature",
					    "updateInterval": "ARBITRARY",
					    "sridEPSG": 0.8008281904610115,
					    "datasource": "datasource",
					    "contact": "contact",
					    "lastUpdate": "2000-01-23",
					    "description": "description",
					    "databasis": "databasis"
					  },
					  "allowedRoles": [
					    "allowedRoles",
					    "allowedRoles"
					  ],
					  "datasetName": "datasetName",
					  "poiSymbolBootstrap3Name": "poiSymbolBootstrap3Name",
					  "poiSymbolColor": "white",
					  "isAOI": false,
					  "loiDashArrayString": "loiDashArrayString",
					  "geoJsonString": "geoJsonString",
					  "topicReference": "topicReference",
					  "poiMarkerColor": "white",
					  "jsonSchema": "jsonSchema",
					  "periodOfValidity": {
					    "endDate": "2000-01-23",
					    "startDate": "2000-01-23"
					  },
					  "isPOI": false,
					  "loiColor": "loiColor",
					  "aoiColor": "aoiColor"
					}
			 -->

			 <form role="form" class="form-group" data-toggle="validator" style="margin-bottom: 0px;">
				<h4>Allgemeine Metadaten</h4>

					<div class="row vertical-align">
                <div class="col-md-3 col-sm-6 col-xs-12">
									<div class="form-group">
										<label >Beschreibung*</label>
										<textarea rows="3" class="form-control" ng-model="metadata.description" placeholder="Datensatz Beschreibung" required></textarea>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="col-md-3 col-sm-6 col-xs-12">
									<div class="form-group">
										<label >Datenbasis</label>
										<textarea rows="3" class="form-control" ng-model="metadata.databasis" placeholder="optionale Beschreibung etwaiger grundlegender Daten, die zur Erzeugung des Datensatzes beitragen"></textarea>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="col-md-3 col-sm-6 col-xs-12">
									<div class="form-group">
										<label >Datenquelle*</label>
										<textarea rows="3" class="form-control" ng-model="metadata.datasource" placeholder="Beschreibung der Datenquelle" required></textarea>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="col-md-3 col-sm-6 col-xs-12">
									<div class="form-group">
										<label >Datenhalter und Kontakt*</label>
										<textarea rows="3" class="form-control" ng-model="metadata.contact" placeholder="Beschreibung des Datenhalters und etwaiger Kontaktinformationen" required></textarea>
										<div class="help-block with-errors"></div>
									</div>
								</div>
					</div>

					<div class="row vertical-align">
                <div class="col-md-3 col-sm-6 col-xs-12">
									<div class="form-group">
										<label >Aktualisierungszyklus*</label>
										<select ng-model="metadata.updateInterval" ng-options="value as value.displayName for value in $ctrl.kommonitorDataExchangeServiceInstance.updateIntervalOptions" class="form-control" required>
											<option disabled selected value> -- Aktualisierungszyklus w&auml;hlen -- </option>
	                  </select>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="col-md-3 col-sm-6 col-xs-12">
									<div class="form-group">
										<label >Datum der letzten Aktualisierung*</label>
										<div class="input-group date">
											<div class="input-group-addon">
												<i class="far fa-calendar-alt"></i>
											</div>
											<input type="text" ng-model="metadata.lastUpdate" class="form-control pull-right" id="georesourceAddLastUpdateDatepicker" required>
										</div>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="col-md-3 col-sm-6 col-xs-12">
									<div class="form-group">
										<label >Literatur</label>
										<textarea rows="3" class="form-control" ng-model="metadata.literature" placeholder="optionale Angaben zu Literatur"></textarea>
										<div class="help-block with-errors"></div>
									</div>
								</div>
								<div class="col-md-3 col-sm-6 col-xs-12">
									<div class="form-group">
										<label >Bemerkung</label>
										<textarea rows="3" class="form-control" ng-model="metadata.note" placeholder="optionale Bemerkung"></textarea>
										<div class="help-block with-errors"></div>
									</div>
								</div>
					</div>

					<hr>

					<h4>Metadaten der neuen Georessource</h4>

						<div class="row vertical-align">
	                <div class="col-md-6 col-sm-6 col-xs-12">
										<div class="form-group">
											<label >Name der Georessource*</label>
											<input type="text" class="form-control" ng-model="datasetName" ng-change="checkDatasetName()" placeholder="eindeutiger Name" required></input>
											<div class="help-block with-errors"></div>
											<div ng-if="datasetNameInvalid" style="color: red;">
												<p>Eingabe ung&uuml;ltig. Es existiert bereits eine Georessource mit gleichem Namen und gleichem Typ.</p>
											</div>
										</div>
									</div>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<div class="form-group">
											<label >Typ*</label>
											<select ng-model="georesourceType" ng-change="onChangeGeoresourceType()" class="form-control" required>
												<option selected value="poi">Points of Interest</option>
												<option value="loi">Lines of Interest</option>
												<option value="aoi">Areas of Interest</option>
		                  </select>
											<div class="help-block with-errors"></div>
										</div>
									</div>
						</div>

						<div ng-show="georesourceType === 'poi'" class="row vertical-align">
	                <div class="col-md-4 col-sm-6 col-xs-12">
										<div class="form-group" align="center">
											<label >Farbe des Punktmarkers*</label>
											<div class="dropdown customColorPicker">
												<button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
											    <i style="background: {{selectedPoiMarkerColor.colorValue}};"></i> {{selectedPoiMarkerColor.colorName}} <span class="caret"></span>
											  </button>
											  <ul class="dropdown-menu dropdown-menu-center">
											    <li ng-repeat="markerColor in $ctrl.kommonitorDataExchangeServiceInstance.availablePoiMarkerColors" ng-click="onChangeMarkerColor(markerColor)">
														<a href=""><i style="background: {{markerColor.colorValue}};"></i>{{markerColor.colorName}}</a>
													</li>
											  </ul>
												<div class="help-block with-errors"></div>
											</div>
										</div>
									</div>
									<div class="col-md-4 col-sm-6 col-xs-12">
										<div class="form-group" align="center">
											<label >Symbol*</label>
											<br/>
											<button id="poiSymbolPicker" class="btn btn-info"></button>
											<!-- <br/>
											<p><b>Icon Bezeichner: </b>{{selectedPoiIconName}}</p> -->
											<div class="help-block with-errors"></div>
										</div>
									</div>
									<div class="col-md-4 col-sm-6 col-xs-12">
										<div class="form-group" align="center">
											<label >Farbe des Punktsymbols*</label>
											<div class="dropdown customColorPicker">
												<button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
											    <i style="background: {{selectedPoiSymbolColor.colorValue}};"></i> {{selectedPoiSymbolColor.colorName}} <span class="caret"></span>
											  </button>
											  <ul class="dropdown-menu dropdown-menu-center">
											    <li ng-repeat="symbolColor in $ctrl.kommonitorDataExchangeServiceInstance.availablePoiMarkerColors" ng-click="onChangeSymbolColor(symbolColor)">

														<a href=""><i style="background: {{symbolColor.colorValue}};"></i> {{symbolColor.colorName}}</a>
													</li>
											  </ul>
												<div class="help-block with-errors"></div>
											</div>
										</div>
									</div>
						</div>

						<div ng-show="georesourceType === 'loi'" class="row vertical-align">
	                <div class="col-md-6 col-sm-6 col-xs-12">
										<div class="form-group" align="center">
											<label >Linienfarbe*</label>
											<div id="loiColorPicker" class="input-group" style="width: 50px;">
													<input type="text" style="display:none;" class="form-control input-sm" ng-model="loiColor" placeholder="Line of Interest Farbauswahl" value="#bf3d2c" required />
													<span title="Klicken, um die Farbe anzupassen" style="border: 1px solid #ccc;" class="input-group-addon btn btn-info btn-sm"><i></i></span>
											</div>
											<div class="help-block with-errors"></div>

										</div>
									</div>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<div class="form-group" align="center">
											<label >Linienmuster*</label>
											<div class="dropdown">
												<button type="button" width="200px" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
													<div id="loiDashArrayDropdownButton">

													</div> <span class="caret"></span>
											  </button>
											  <ul class="dropdown-menu dropdown-menu-center">
											    <li ng-repeat="loiDashArrayObject in $ctrl.kommonitorDataExchangeServiceInstance.availableLoiDashArrayObjects" ng-click="onChangeLoiDashArray(loiDashArrayObject)">
														<a href="">
															<div id="loiDashArrayDropdownItem-{{$index}}" >
															</div>
														</a>
													</li>
											  </ul>
												<div class="help-block with-errors"></div>
											</div>
										</div>
									</div>
						</div>

						<div ng-show="georesourceType === 'aoi'" class="row vertical-align">
	                <div class="col-md-12 col-sm-12 col-xs-12">
										<div class="form-group" align="center">
											<label >Objektfarbe*</label>
											<div id="aoiColorPicker" class="input-group" style="width: 50px;">
													<input type="text" style="display:none;" class="form-control input-sm" ng-model="aoiColor" placeholder="Area of Interest Farbauswahl" value="#bf3d2c" required />
													<span title="Klicken, um die Farbe anzupassen" style="border: 1px solid #ccc;" class="input-group-addon btn btn-info btn-sm"><i></i></span>
											</div>
											<div class="help-block with-errors"></div>

										</div>
									</div>
						</div>

						<hr>

						<h4>R&auml;umlicher Datensatz</h4>
						<div class="row vertical-align">
	                <div class="col-md-3 col-sm-6 col-xs-12">
										<div class="form-group">
											<label >Geodaten-Quellformat*</label>
											<select ng-model="geodataSourceFormat" ng-options="value as value.displayName for value in $ctrl.kommonitorDataExchangeServiceInstance.geodataSourceFormats" class="form-control" required>
												<option disabled selected value> -- Quellformat w&auml;hlen -- </option>
		                  </select>
											<div class="help-block with-errors"></div>
										</div>
									</div>
									<div class="col-md-3 col-sm-6 col-xs-12">
										<div class="form-group">
											<label >Geodaten-Input*</label>
											<div ng-if="!geodataSourceFormat.value">
												<p>bitte zuerst das Quellformat w&auml;hlen</p>
											</div>
											<div ng-if="geodataSourceFormat.value === 'geojson'">
												<input type="file" class="form-control" id="georesourceDataSourceInput" accept=".json,.geojson" required></input>
											</div>
											<!-- <div class="help-block"><p>Features m&uuml;ssen Informationen &uuml;ber eindutige ID und eindeutigen Namen in Attribut namens <code>ID</code> und <code>NAME</code> enthalten, um in KomMonitor verarbeitet werden zu k&ouml;nnen.</p></div> -->
											<div class="help-block"><p>Als Koordinatensystem wird gegenw&auml;rtig WGS84 (EPSG:4326) vorausgesetzt.</p></div>
											<div class="help-block with-errors"></div>
											<div ng-if="georesourceDataSourceInputInvalid" style="color: red;">
												<p>Eingabe ung&uuml;ltig. Grund: {{georesourceDataSourceInputInvalidReason}}</p>
											</div>
										</div>
									</div>
									<div class="col-md-3 col-sm-6 col-xs-12">
										<div class="form-group">
											<label >ID Attributname*</label>
											<input type="text" class="form-control" ng-change="checkGeoresourceDataSource()" ng-model="georesourceDataSourceIdProperty" required></input>
											<div class="help-block"><p>Name des Attributs, welches den eindeutigen Identifier des Features enth&auml;lt.</p></div>
											<div class="help-block with-errors"></div>
											<div ng-if="idPropertyNotFound" style="color: red;">
												<p>Eingabe ung&uuml;ltig. Angegebenes Attribut nicht gefunden oder enth&auml;lt NULL-Werte.</p>
											</div>
										</div>
									</div>
									<div class="col-md-3 col-sm-6 col-xs-12">
										<div class="form-group">
											<label >NAME Attributname*</label>
											<input type="text" class="form-control" ng-change="checkGeoresourceDataSource()" ng-model="georesourceDataSourceNameProperty" required></input>
											<div class="help-block"><p>Name des Attributs, welches den eindeutigen Namen des Features enth&auml;lt.</p></div>
											<div class="help-block with-errors"></div>
											<div ng-if="namePropertyNotFound" style="color: red;">
												<p>Eingabe ung&uuml;ltig. Angegebenes Attribut nicht gefunden oder enth&auml;lt NULL-Werte.</p>
											</div>
										</div>
									</div>
						</div>

						<div class="row vertical-align">
									<div class="col-md-6 col-sm-6 col-xs-12">
										<div class="form-group">
											<label >G&uuml;ltigkeitszeitraum: g&uuml;ltig seit*</label>
											<div class="input-group date">
			                  <div class="input-group-addon">
			                    <i class="far fa-calendar-alt"></i>
			                  </div>
			                  <input type="text" ng-model="periodOfValidity.startDate" ng-change="checkPeriodOfValidity()" class="form-control pull-right" id="georesourceAddDatepickerStart" required>
			                </div>
											<div class="help-block"><p>Eintrag ist erforderlich, falls die r&auml;mlichen Features nicht selbst &uuml;ber ein Attribut namens <code>validStartDate</code> verf&uuml;gen.</p></div>
											<div class="help-block with-errors"></div>
											<div ng-if="periodOfValidityInvalid" style="color: red;">
												<p>Eingabe ung&uuml;ltig. Definiertes Zeitintervall ist nicht erlaubt.</p>
											</div>
										</div>
									</div>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<div class="form-group">
											<label >G&uuml;ltigkeitszeitraum: g&uuml;ltig bis</label>
											<div class="input-group date">
			                  <div class="input-group-addon">
			                    <i class="far fa-calendar-alt"></i>
			                  </div>
			                  <input type="text" ng-model="periodOfValidity.endDate" ng-change="checkPeriodOfValidity()" class="form-control pull-right" id="georesourceAddDatepickerEnd">
			                </div>
											<div class="help-block"><p>Eintrag ist erforderlich, falls die r&auml;mlichen Features nicht selbst &uuml;ber ein Attribut namens <code>validEndDate</code> verf&uuml;gen. Enddatum darf leer sein, um anzuzeigen, dass es sich um aktuell g&uuml;ltige Features handelt.</p></div>
											<div class="help-block with-errors"></div>
											<div ng-if="periodOfValidityInvalid" style="color: red;">
												<p>Eingabe ung&uuml;ltig. Definiertes Zeitintervall ist nicht erlaubt.</p>
											</div>
										</div>
									</div>
						</div>

				</form>

				<!-- ng-disabled="((!customWfsTitle) || (!customWfsDescription) || (!customWfsUrl) || (!customWfsLayerName))" -->

			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default pull-left" data-dismiss="modal">Schlie&szlig;en</button>
				<button type="button" class="btn btn-info pull-left" ng-click="onImportGeoresourceAddMetadata()" title="Importieren der Metadaten aus einer Datei"><i class="fas fa-file-import"></i>&nbsp;&nbsp;Metadaten-Import</button>
				<input style="display:none;" class="pull-left" type="file" class="form-control" id="georesourceMetadataImportFile" accept=".json,"></input>
				<button type="button" style="margin-left: 6px;" class="btn btn-info pull-left" ng-disabled="" ng-click="onExportGeoresourceAddMetadata()" title="Exportieren der Metadaten in eine Datei"><i class="fas fa-file-export"></i>&nbsp;&nbsp;Metadaten-Export</button>
					<button type="button" class="btn btn-success" ng-disabled="!datasetName || !metadata.description || !metadata.datasource || !metadata.contact || !metadata.updateInterval || !metadata.lastUpdate || !spatialResourceConfigured || !georesourceDataSourceIdProperty || !georesourceDataSourceNameProperty || !periodOfValidity.startDate || datasetNameInvalid || periodOfValidityInvalid || hierarchyInvalid || georesourceDataSourceInputInvalid || idPropertyNotFound || namePropertyNotFound" ng-click="addGeoresource()">Georessource registrieren</button>
					<button type="button" class="btn btn-danger" ng-click="resetGeoresourceAddForm()">Zur&uuml;cksetzen</button>
			</div>

			<div id="georesourceAddSuccessAlert" style="position: absolute; bottom: 0px; width: 100%;" hidden class="alert alert-success alert-dismissable">
                <button type="button" class="close" ng-click="hideSuccessAlert()" aria-hidden="true">&times;</button>
                <h4><i class="icon fa fa-check"></i>Georessource registriert</h4>
                Eine neue Georessource mit Namen {{successMessagePart}} wurde in KomMonitor registriert und in die &Uuml;bersichtstabelle eingetragen.
      </div>

			<div id="georesourceAddErrorAlert" style="position: absolute; bottom: 0px; width: 100%;" hidden class="alert alert-danger alert-dismissable">
                <button type="button" class="close" ng-click="hideErrorAlert()" aria-hidden="true">&times;</button>
                <h4><i class="icon fa fa-ban"></i>Registrierung gescheitert</h4>
                Bei der Registrierung der Georessource ist ein Fehler aufgetreten. Fehlermeldung:
								<br/>
								<pre>{{errorMessagePart}}</pre>.
      </div>

			<div id="georesourceMetadataImportErrorAlert" style="position: absolute; bottom: 0px; width: 100%;" hidden class="alert alert-danger alert-dismissable">
                <button type="button" class="close" ng-click="hideMetadataErrorAlert()" aria-hidden="true">&times;</button>
                <h4><i class="icon fa fa-ban"></i>Metadata Import gescheitert</h4>
                Beim Import der Metadaten aus einer Datei ist ein Fehler aufgetreten. Fehlermeldung:
								<br/>
								<pre>{{georesourceMetadataImportError}}</pre>
								<br/>
								<br/>
								<p>Bitte stellen Sie sicher, dass folgendes JSON-Format eingehalten wird:</p>
								<pre id="georesourcesAddMetadataPre" style="overflow:auto; max-height:500px;"></pre>
      </div>

		</div>
		<!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
</div>
<!-- /.modal -->
