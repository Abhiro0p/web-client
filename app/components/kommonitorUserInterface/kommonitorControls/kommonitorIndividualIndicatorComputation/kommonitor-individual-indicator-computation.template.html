<div align="center" id="indicatorProcessing">
	<h4 class="justify" align="center">Interaktive parametrisierte Neuberechnung eines Indikators</h4>
	<div ng-if="!targetIndicator">
		<p>Bitte einen Indikator ausw&auml;hlen, der über ein Skript berechnet werden kann.</p>
	</div>

	<div class="hiddenTable" text-align="center" align="center">

		<div class="hiddenTableCell">

			<div text-align="center" align="center" class="hiddenTableContent">
				<select
					size="5" ng-model="targetIndicator" ng-options="indicator as indicator.indicatorName for indicator in $ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:{creationType:'COMPUTATION'}"
					class="form-control" ng-change="onChangeTargetIndicator()" required>
					<option value="" selected disabled>-- berechenbaren Indikator w&auml;hlen --</option>
				</select>
			</div>

		</div>


		<div class="hiddenTableCell">

			<div text-align="center" align="center" class="hiddenTableContent" ng-show="targetIndicator">
				<!-- simple list of available processes -->
				<select
					size="5" ng-model="targetSpatialUnit" ng-options="spatialUnit as spatialUnit.spatialUnitLevel for spatialUnit in $ctrl.kommonitorDataExchangeServiceInstance.availableSpatialUnits"
					ng-change="onChangeTargetSpatialUnit()" class="form-control" required>
					<option value="" selected disabled>-- Ziel-Raumeinheit w&auml;hlen --</option>
					<option
						ng-repeat="spatialUnit in $ctrl.kommonitorDataExchangeServiceInstance.availableSpatialUnits"></option>
				</select>
			</div>

		</div>

	</div>

	<br />

	<!-- <div id="dateSliderForComputation" class="rangeslide" ></div> -->
	<div id="dateSliderForComputationWrapperr" ng-show="targetIndicator && targetSpatialUnit">
    <input id="dateSliderForComputation" type="text" class="js-range-slider" value=""></input>
  </div>


	<div ng-show="targetIndicator && targetSpatialUnit && targetDate" id="parameterManagement" align="center">

		<div class="loading-overlay ng-hide" ng-show="loadingData">
        	<span class="glyphicon glyphicon-refresh icon-spin"></span>
    </div>

		<div>
			<p>{{targetIndicator.processDescription}}</p>
		</div>

		<p></p>

		<div class="form-group">
			<!-- <label align='left'>individuelle Neuberechung</label> -->

				<div ng-if="processInputs" id="processInputForm">
					<!-- here the content is filled programatically -->

					<div ng-repeat='input in processInputs' class="slidecontainer">
						<label>{{input.parameterData.name}}: {{input.inputElement.ngModelVariable}}</label>
						<p>{{input.parameterData.description}}</p>
						<!-- <input type='{{input.type}}' value='{{ input.value }}'> -->
						<input id="{{input.parameterData.name}}" class="{{input.inputElement.class}}" ng-model="input.inputElement.ngModelVariable" type="{{input.inputElement.type}}" value="{{input.inputElement.value}}" min="{{input.inputElement.min}}" max="{{input.inputElement.max}}" step="{{input.inputElement.step}}">

						<p></p>
					</div>
				</div>

				<br />

			  <button ng-click="calculateCustomIndicator()" class="btn btn-primary">individuelle Neuberechnung starten</button>

			<br/>
			<p></p>
			<p>Laufzeit beträgt je nach Komplexität der Berechnung wenige Sekunden bis zu einigen Minuten!</p>

			<div ng-show="jobInfoText || computedCustomizedIndicatorGeoJSON" class="progress">
			  <div id="customComputationProgressBar" class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
			    <!-- <span class="sr-only">{{progress}}% Fortschritt</span> -->
					0% Fortschritt
			  </div>
			</div>

			<div ng-show="jobInfoText" class="alert alert-info">
				<p>{{jobInfoText}}</p>
			</div>


			<div align="center" ng-show="computedCustomizedIndicatorGeoJSON" class="alert alert-success">

				<br/>

				<p>Berechnung erfolgreich abgeschlossen. Das Ergebnis kann entweder auf der Karte dargestellt werden oder als GeoJSON-Datei heruntergeladen werden.</p>

				<br/>
				<div style="display: inline-block" align="center" id="indicatorOutput">
					<button ng-click="addComputedIndicatorToMap()" type="button" class="btn btn-success">auf Karte darstellen</button>
					<!-- another button to download as GeoJSOn will be set programatically within component file -->
				</div>

			</div>

		</div>

		<div ng-show="error"
			class="alert alert-danger">
			<strong>Fehler</strong>
			Bei der Verarbeitung ist ein Fehler aufgetreten.
			<p></p>
			<p>
				<strong>Fehlernachricht: </strong>{{error}}
			</p>
		</div>

	</div>


</div>
