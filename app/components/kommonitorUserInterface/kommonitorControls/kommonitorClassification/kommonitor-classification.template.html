<!-- classification  -->
<div id="kommonitorClassification">
  <div class="classification-container">
    <div title="Hier können Sie die Klassifizierungsmethode ändern.">
      <div style="font-weight: bold;">Methode</div>
      <div 
        id="method-select-selected" 
        class="form-control"
        ng-click="showMethodSelection = !showMethodSelection">
        {{methodName}}
      </div>
      <div ng-show="showMethodSelection" id="method-select-selection" class="select-border"> 
        <div 
          id="method-select-method"
          ng-click="onMethodSelected(method)" 
          ng-repeat="method in methods">
          <div class="method-select-method-symbol">
            <div style="background-image: url('{{ method.imgPath }}')"></div>
          </div>
          <div class="method-select-method-text">
            <div class="method-select-method-name">{{method.name}}</div>
            <div class="method-select-method-description">{{method.description}}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- number of classes -->
    <form class="nrClassSelection" 
          ng-show="$ctrl.kommonitorVisualStyleHelperServiceInstance.classifyMethod !== 'manual'">
      <label>
        Anzahl Klassen 
        <input 
          type="number"
          min="3"
          max="7"
          ng-change="onChangeNumberOfClasses()"
          ng-model="$ctrl.kommonitorVisualStyleHelperServiceInstance.numClasses"
          class="form-control">
      </label>
    </form>

    <!-- manual breaks -->
    <div ng-if="$ctrl.kommonitorVisualStyleHelperServiceInstance.classifyMethod=='manual'">
      <uib-tabset active="0">
        <!-- Class Breaks Tab-->
        <uib-tab index="0" heading="Klassengrenzen">
          <label>Klassengrenzen</label>
          <div 
            class="breaksWrapper" 
            ng-if="!$ctrl.kommonitorDataExchangeServiceInstance.isMeasureOfValueChecked"
            ng-repeat="(i, b) in $ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks track by $index">
            <input 
              type="number"
              class="form-control"
              ng-blur="onBreaksChanged()"
              ng-model="$ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks[i]">
              <div class="countBarContainer">
                <div class="countBar" style="width:{{getWidthForBar(i-1)}}%">
                </div>
              </div>
              <div class="countBarContainer">
                <div class="countBar" style="width:{{getWidthForBar(i)}}%">
                </div>
                <div>
                  <div ng-show="(i != $ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks.length - 1)" class="histogramNumber">
                    {{getHistogramNumber(i)}}             
                  </div>
                </div>
              </div>
          </div>
          <!-- Measure Of Value Classification: -->
          <div 
            class="measureOfValueBreaks"
            ng-if="$ctrl.kommonitorDataExchangeServiceInstance.isMeasureOfValueChecked">
            <div>
              unter Schwellwert:
              <div class="movbreaksWrapper" ng-repeat="(i, b) in $ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[1].breaks track by $index">
                <input 
                  type="number"
                  class="form-control"
                  ng-blur="onMOVBreaksChanged()"
                  ng-model="$ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[1].breaks[i]">
              </div>
            </div>
            <div>
              über Schwellwert:
              <div class="movbreaksWrapper" ng-repeat="(i, b) in $ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[0].breaks track by $index">
                <input 
                  type="number"
                  class="form-control"
                  ng-blur="onMOVBreaksChanged()"
                  ng-model="$ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[0].breaks[i]">
              </div>
            </div>
          </div>
        </uib-tab>

        <!-- Histogram Tab-->
        <uib-tab index="1" heading="Histogramm">
          <div ng-if="!$ctrl.kommonitorDataExchangeServiceInstance.isMeasureOfValueChecked" 
               class="histogramTabWrapper"
               ng-mousemove="getHeightInElement($event); toggleAddBtn()"
               id="editableHistogram">
            <div class="breaksArea">
              <!-- add btn -->
              <div class="addBtnWrapper breakWrapper"
                   style="top: {{addBtnHeight}}px"
                   ng-if="showAddBtn"
                   ng-mousover="toggleAddBtn()">
                <div class="addBtn" ng-click="addNewBreak()">+</div>
                <div class="line"></div>
              </div>
              <!-- measure of Value -->
              <div class="breakWrapper measureOfValue"
                   style="top: {{getPercentage(kommonitorDataExchangeServiceInstance.measureOfValue)}}%"
                   ng-mousedown="onBreakMouseMove($event)">
                <div class ="break">
                  <!--<div class="colorBox"></div>-->
                  <input type="number" 
                         ng-model="kommonitorDataExchangeServiceInstance.measureOfValue">
                  <i class="fa-regular fa-trash-can"></i>
                </div>
                <div class="line"></div>
              </div>
              <!-- other breaks -->
              <div class="breakWrapper"
                   ng-repeat="(i, b) in $ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks track by $index"
                   style="top: {{getPercentage(b)}}%">
                <div class="break"
                      ng-mousemove="onBreakMouseMove($event)">
                  <!--<div class="colorBox"></div>-->
                  <input type="number"
                         ng-blur="onBreaksChanged()"
                         ng-model-options="{ updateOn: 'blur'}"
                         min="{{$ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks[0]}}"
                         max="{{$ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks[$ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks.length - 1]}}"
                         ng-model="$ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks[i]">
                  <i class="fa-regular fa-trash-can" ng-click="deleteBreak(i)"></i>
                </div>
                <div class="line"></div>
              </div>
            </div>
            <!-- bars -->
            <div class="histogram">
              <div class="histogramBar"
                   ng-repeat="(i, b) in $ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks"
                   style="height: {{getHeightForBar(i)}}%; 
                          width: {{getWidthForHistogramBar(i)}}%;
                          background-color: {{$ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.colors[i]}}">
              </div>
            </div>
          </div>

          <div ng-if="$ctrl.kommonitorDataExchangeServiceInstance.isMeasureOfValueChecked" class="histogramTabWrapper">
            <div class="breaksArea">
              <!-- measure of Value -->
              <div class="breakWrapper measureOfValue"
                   style="top: {{getPercentage(kommonitorDataExchangeServiceInstance.measureOfValue)}}%"
                   ng-mousedown="onBreakMouseMove($event)">
                <div class ="break">
                  <!--<div class="colorBox"></div>-->
                  <input type="number" 
                         ng-model="kommonitorDataExchangeServiceInstance.measureOfValue">
                  <i class="fa-regular fa-trash-can"></i>
                </div>
                <div class="line"></div>
              </div>
              <!-- other breaks -->
              <div class="breakWrapper"
                   ng-repeat="(i, b) in $ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks track by $index"
                   style="top: {{getPercentage(b)}}%">
                <div class="break"
                      ng-mousemove="onBreakMouseMove($event)">
                  <!--<div class="colorBox"></div>-->
                  <input type="number" 
                         ng-blur="onBreaksChanged()"
                         ng-model="$ctrl.kommonitorVisualStyleHelperServiceInstance.manualBrew.breaks[i]">
                  <i class="fa-regular fa-trash-can"></i>
                </div>
                <div class="line"></div>
              </div>
            </div>
            <!-- bars -->
            <div class="histogram">
              <div class="histogramBar"
                   ng-repeat="(i, b) in $ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[1].breaks"
                   ng-if="i != $ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[1].breaks.length - 1"
                   style="height: {{getHeightForBarMOV(1, i)}}%; 
                          width: {{getWidthForHistogramBarMOV(1, i)}}%;
                          background-color: {{$ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[1].colors[i]}}">
              </div>
              <div class="histogramBar"
                   ng-repeat="(i, b) in $ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[0].breaks"
                   ng-if="i != $ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[0].breaks.length - 1"
                   style="height: {{getHeightForBarMOV(0, i)}}%; 
                          width: {{getWidthForHistogramBarMOV(0, i)}}%;
                          background-color: {{$ctrl.kommonitorVisualStyleHelperServiceInstance.measureOfValueBrew[0].colors[i]}}">
            </div>
            </div>
          </div>
        </uib-tab>
      </uib-tabset>

    <!--
    <div class="classificationBoxToogleSlidersWrapper">
      <span class="classificationBoxToogleSlidersLbl">
        <strong>Wertebereiche abrunden</strong>
      </span>
      <label class="switch" title="Wertebereiche abrunden">
        <input 
          id="controlIndicatorClassifyOption_roundValues" 
          type="checkbox"
          value="roundValues">
        <span class="switchslider round"></span>
      </label>
    </div>-->
  
    
    <!-- use whole time series -->
    <!--
    <div class="classificationBoxToogleSlidersWrapper">
      <span class="classificationBoxToogleSlidersLbl">
        <strong>Klassifizierung &uuml;ber die gesamte Zeitreihe</strong> &nbsp;
      </span>
      <label class="switch" title="Klassifizierung &uuml;ber die gesamte Zeitreihe">
        <input 
          id="controlIndicatorClassifyOption_wholeTimeseries" 
          type="checkbox" 
          value="useWholeTimeseriesClassification" 
          ng-change="onWholeTimeseriesClassificationCheckboxChanged()"
          ng-model="$ctrl.kommonitorDataExchangeServiceInstance.classifyUsingWholeTimeseries" 
          ng-checked="$ctrl.kommonitorDataExchangeServiceInstance.classifyUsingWholeTimeseries">
          <span class="switchslider round"></span>
      </label>
    </div>
  
    <div class="classificationBoxToogleSlidersWrapper" ng-if="containsZeroValues">
      <span class="classificationBoxToogleSlidersLbl"><strong>Wert "0" als separate Klasse darstellen</strong> &nbsp;</span>
      <label class="switch" title="0 als separate Klasse darstellen"><input id="controlIndicatorZeroClassifyOption" type="checkbox" value="useSeparateZeroClass" ng-model="$ctrl.kommonitorDataExchangeServiceInstance.classifyZeroSeparately" ng-checked="$ctrl.kommonitorDataExchangeServiceInstance.classifyZeroSeparately"><span class="switchslider round"></span></label>
    </div>
  
    <div class="classificationBoxToogleSlidersWrapper" ng-if="containsOutliers_high || containsOutliers_low">
      <span class="classificationBoxToogleSlidersLbl"><strong>Ausrei&szlig;er gesondert markieren</strong> &nbsp;</span>
      <label class="switch" title="Ausrei&szlig;er gesondert markieren"><input id="controlIndicatorOutlierDetection" type="checkbox" value="useOutlierDetection" ng-model="$ctrl.kommonitorDataExchangeServiceInstance.useOutlierDetectionOnIndicator" ng-checked="$ctrl.kommonitorDataExchangeServiceInstance.useOutlierDetectionOnIndicator"><span class="switchslider round"></span></label>
    </div>
  
    <div class="classificationBoxToogleSlidersWrapper">
      <span class="classificationBoxToogleSlidersLbl"><strong>NoData-Werte tempor&auml;r aus Datensatz entfernen</strong> &nbsp;</span>
      <label class="switch" title="NoData-Werte tempor&auml;r aus Datensatz entfernen">
        <input id="controlNoDataDisplay" type="checkbox" value="useNoDataToggle" ng-model="$ctrl.kommonitorDataExchangeServiceInstance.useNoDataToggle" ng-checked="$ctrl.kommonitorDataExchangeServiceInstance.useNoDataToggle">
        <span class="switchslider round"></span>
      </label>
    </div>
    -->
  </div>
</div>