<div id="indicatorSetup">
	<!-- <h3 class="justify" align="center">Datenangebot</h3> -->

	<!-- <p align="center">Bitte Layer gem&auml;&szlig; Kategorie zur Anzeige ausw&auml;hlen</p> -->

	<div align="center">
		<div class="loading-overlay-sidebar-small ng-hide" ng-show="loadingData">
					<span class="glyphicon glyphicon-refresh icon-spin"></span>
		</div>
	</div>

	<div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">Indikatorenauswahl</h3>

							<div class="box-tools pull-right">
								<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
								</button>
							</div>
            </div>
            <!-- /.box-header -->
            <!-- form start -->

              <div class="box-body">

								<!-- <div class="" align="center">

									<nav class="navbar navbar-default">
										<div class="container-fluid">
											<div  align="center" text-align="center">
												<label>Themenfilter</label>
											</div>
											<ul class="nav nav-pills nav-justified">
												<li ng-repeat="topic in $ctrl.kommonitorDataExchangeServiceInstance.availableTopics | filter: { topicName: '!Migration' }" id="{{topic.topicName}}"  class=""><a ng-click="$ctrl.onClickTheme(topic.topicName)" href="">{{topic.topicName}}</a></li>
											</ul>
										</div>

										<br/>

										<div align="center" ng-if="$ctrl.kommonitorDataExchangeServiceInstance.selectedTopic">
											<p>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedTopic.topicDescription}}</p>
											<p/>
											<button type="button" class="btn btn-danger" ng-click="$ctrl.unsetTopic()" type="button">Themenfilter aufheben</button>
											<p/>
										</div>
									</nav>
								</div> -->


								<!-- <div>
									<img style="display: block; margin-left: auto; margin-right: auto;" src="./logos/Indikatorenframework_transparent.png" alt="Indikatorenframework" height="257" width="400">
								<div >

								<br/> -->



											<div class="input-group">
				                <span class="input-group-addon"><i class="fas fa-filter"></i></span>
				                <input type="text" class="form-control input-sm" placeholder="Stichwortfilter" ng-model="indicatorNameFilter">
				              </div>

										<br/>


										 <uib-tabset active="0">
									    <uib-tab index="0" heading="Datenkatalog">

												<div class="just-padding">

													<div id="indicatorHierarchySelection" class="list-group list-group-root well">

														<label>Erl&auml;uterungen zur Symbolik </label>
														<div class="list-group-item list-group-item-default style-simple-indicator">
															<p style="cursor:pointer; color: black;" <i class="fas fa-sitemap"></i> &nbsp;&nbsp;<b>Standardindikator (numerische Wertverteilung)</b>
																	[Einheitsbezeichnung]</p>
														</div>

														<div class="list-group-item list-group-item-default style-headline-indicator">
															<p style="cursor:pointer; color: white;"
																	style="color: white;" <i class="fas fa-tachometer-alt"></i> &nbsp;&nbsp;<b>Leitindikator (bewertende Aussage)</b>
																	[Einheitsbezeichnung]</p>
														</div>

														<br/>

														<label> Datenkatalog </label>

														<div ng-repeat="mainTopic in $ctrl.kommonitorDataExchangeServiceInstance.availableTopics | filter:{topicType:'main'} | filter:{topicResource:'indicator'}">
															<div  class="list-group-item list-group-item-default" style="background: #2171b5; color: white;">
																<a id="{{mainTopic.topicId}}" href="" ng-attr-title="{{mainTopic.topicDescription}}" class="collapseTrigger" style="color: white;" ng-click="isCollapsed_mainTopic = !isCollapsed_mainTopic" ng-init="isCollapsed_mainTopic=true"><i class="glyphicon glyphicon-chevron-right"></i>{{mainTopic.topicName}}  ({{$ctrl.kommonitorDataExchangeServiceInstance.getNumberOfIndicators(mainTopic, indicatorNameFilter)}})</a>
															</div>


															<div ng-repeat="subTopic in mainTopic.subTopics" class="list-group collapse" uib-collapse="isCollapsed_mainTopic">

																<div  class="list-group-item list-group-item-default" style="background: #6baed6; color: white;">
																	<a id="{{subTopic.topicId}}" class="collapseTrigger" style="color: white;" ng-attr-title="{{subTopic.topicDescription}}" href="" ng-click="isCollapsed_subTopic = !isCollapsed_subTopic" ng-init="isCollapsed_subTopic=true"><i class="glyphicon glyphicon-chevron-right"></i>{{subTopic.topicName}}  ({{$ctrl.kommonitorDataExchangeServiceInstance.getNumberOfIndicators(subTopic, indicatorNameFilter)}})</a>
																</div>

																<div ng-repeat="subsubTopic in subTopic.subTopics" class="list-group collapse" uib-collapse="isCollapsed_subTopic">

																	<div  class="list-group-item list-group-item-default" style="background: #bdd7e7; color: white;">
																		<a id="{{subsubTopic.topicId}}" class="collapseTrigger" style="color: black;" ng-attr-title="{{subsubTopic.topicDescription}}" href="" ng-click="isCollapsed_subsubTopic = !isCollapsed_subsubTopic" ng-init="isCollapsed_subsubTopic=true"><i class="glyphicon glyphicon-chevron-right"></i>{{subsubTopic.topicName}}   ({{$ctrl.kommonitorDataExchangeServiceInstance.getNumberOfIndicators(subsubTopic, indicatorNameFilter)}})</a>
																	</div>

																	<div ng-repeat="subsubsubTopic in subsubTopic.subTopics" class="list-group collapse" uib-collapse="isCollapsed_subsubTopic">

																		<div  class="list-group-item list-group-item-default" style="background: #eff3ff; color: white;">
																			<a id="{{subsubsubTopic.topicId}}" class="collapseTrigger" style="color: black;" ng-attr-title="{{subsubsubTopic.topicDescription}}" href="" ng-click="isCollapsed_subsubsubTopic = !isCollapsed_subsubsubTopic" ng-init="isCollapsed_subsubsubTopic=true"><i class="glyphicon glyphicon-chevron-right"></i>{{subsubsubTopic.topicName}}   ({{$ctrl.kommonitorDataExchangeServiceInstance.getNumberOfIndicators(subsubsubTopic, indicatorNameFilter)}})</a>
																		</div>

																		<div ng-show="($ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:subsubsubTopic.topicId} | filter:indicatorNameFilter).length > 0">
																			<div class="list-group collapse indicatorInputForm" uib-collapse="isCollapsed_subsubsubTopic">
																				<div id="indicatorHierarchyElement-{{indicatorMetadata.indicatorId}}" ng-class="{'style-headline-indicator': indicatorMetadata.isHeadlineIndicator , 'style-simple-indicator': ! indicatorMetadata.isHeadlineIndicator}" 
																					ng-repeat="indicatorMetadata in $ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:subsubsubTopic.topicId} | filter:indicatorNameFilter" class="list-group-item list-group-item-default">
																					<div ng-if="indicatorMetadata.isHeadlineIndicator">
																						<p style="cursor:pointer; color: white;" ng-attr-title="<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]" style="color: white;" ng-click="onClickHierarchyIndicator(indicatorMetadata)"><i class="fas fa-tachometer-alt"></i> &nbsp;&nbsp;<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]</p>																			
																					</div> 
																					<div ng-if="! indicatorMetadata.isHeadlineIndicator">
																						<p style="cursor:pointer;" ng-attr-title="<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]" style="color: white;" ng-click="onClickHierarchyIndicator(indicatorMetadata)"><i class="fas fa-sitemap"></i> &nbsp;&nbsp;<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]</p>																				
																					</div>
																					</div>
																			</div>
																		</div>
																		<div ng-show="!(($ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:subsubsubTopic.topicId} | filter:indicatorNameFilter).length > 0)">
																			<div class="list-group collapse" uib-collapse="isCollapsed_subsubsubTopic">
																				<!-- <div class="list-group-item list-group-item-default" style="background: #eb9c98;">
																					 <p><i class="fas fa-sitemap"></i> &nbsp;&nbsp;- keine Indikatoren in dieser Hierarchieebene -</p>
																				</div> -->
																			</div>
																		</div>


																	</div>
																	<!-- end sub sub sub topics -->


																	<div ng-show="($ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:subsubTopic.topicId} | filter:indicatorNameFilter).length > 0">
																		<div class="list-group collapse indicatorInputForm" uib-collapse="isCollapsed_subsubTopic">
																			<div id="indicatorHierarchyElement-{{indicatorMetadata.indicatorId}}" ng-class="{'style-headline-indicator': indicatorMetadata.isHeadlineIndicator , 'style-simple-indicator': ! indicatorMetadata.isHeadlineIndicator}" 
																				ng-repeat="indicatorMetadata in $ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:subsubTopic.topicId} | filter:indicatorNameFilter" class="list-group-item list-group-item-default">
																				<div ng-if="indicatorMetadata.isHeadlineIndicator">
																					<p style="cursor:pointer; color: white;" ng-attr-title="<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]" style="color: white;" ng-click="onClickHierarchyIndicator(indicatorMetadata)"><i class="fas fa-tachometer-alt"></i> &nbsp;&nbsp;<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]</p>
																			
																				</div> 
																				<div ng-if="! indicatorMetadata.isHeadlineIndicator">
																					<p style="cursor:pointer;" ng-attr-title="<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]" style="color: white;" ng-click="onClickHierarchyIndicator(indicatorMetadata)"><i class="fas fa-sitemap"></i> &nbsp;&nbsp;<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]</p>
																			
																				</div>
																			</div>
																		</div>
																	</div>
																	<div ng-show="!(($ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:subsubTopic.topicId} | filter:indicatorNameFilter).length > 0)">
																		<div class="list-group collapse" uib-collapse="isCollapsed_subsubTopic">
																			<!-- <div class="list-group-item list-group-item-default" style="background: #eb9c98;">
																			 	<p><i class="fas fa-sitemap"></i> &nbsp;&nbsp;- keine Indikatoren in dieser Hierarchieebene -</p>
																			</div> -->
																		</div>
																	</div>


																</div>
																<!-- end sub sub opics -->



																<div ng-show="($ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:subTopic.topicId} | filter:indicatorNameFilter).length > 0">
																	<div class="list-group collapse indicatorInputForm" uib-collapse="isCollapsed_subTopic">
																		<div id="indicatorHierarchyElement-{{indicatorMetadata.indicatorId}}" ng-class="{'style-headline-indicator': indicatorMetadata.isHeadlineIndicator , 'style-simple-indicator': ! indicatorMetadata.isHeadlineIndicator}"
																			ng-repeat="indicatorMetadata in $ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:subTopic.topicId} | filter:indicatorNameFilter" class="list-group-item list-group-item-default">
																			<div ng-if="indicatorMetadata.isHeadlineIndicator">
																				<p style="cursor:pointer; color: white;" ng-attr-title="<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]" ng-click="onClickHierarchyIndicator(indicatorMetadata)"><i class="fas fa-tachometer-alt"></i> &nbsp;&nbsp;<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]</p>
																		
																			</div> 
																			<div ng-if="! indicatorMetadata.isHeadlineIndicator">
																				<p style="cursor:pointer;" style="color: white;" ng-attr-title="<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]" ng-click="onClickHierarchyIndicator(indicatorMetadata)"><i class="fas fa-sitemap"></i> &nbsp;&nbsp;<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]</p>
																		
																			</div>
																		</div>
																	</div>
																</div>
																<div ng-show="!(($ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:subTopic.topicId} | filter:indicatorNameFilter).length > 0)">
																	<div class="list-group collapse" uib-collapse="isCollapsed_subTopic">
																		<!-- <div class="list-group-item list-group-item-default" style="background: #eb9c98;">
																		 	<p><i class="fas fa-sitemap"></i> &nbsp;&nbsp;- keine Indikatoren in dieser Hierarchieebene -</p>
																		</div> -->
																	</div>
																</div>




															</div>
															<!-- end sub topics -->
															<div ng-show="($ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:mainTopic.topicId} | filter:indicatorNameFilter).length > 0">
																<div class="list-group collapse indicatorInputForm" uib-collapse="isCollapsed_mainTopic">
																	<div id="indicatorHierarchyElement-{{indicatorMetadata.indicatorId}}" ng-class="{'style-headline-indicator': indicatorMetadata.isHeadlineIndicator, 'style-simple-indicator': !indicatorMetadata.isHeadlineIndicator }"
																		ng-repeat="indicatorMetadata in $ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:mainTopic.topicId} | filter:indicatorNameFilter" class="list-group-item list-group-item-default">
																		<div ng-if="indicatorMetadata.isHeadlineIndicator">
																			<p style="cursor:pointer; color: white;" ng-attr-title="<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]" ng-click="onClickHierarchyIndicator(indicatorMetadata)"><i class="fas fa-tachometer-alt"></i> &nbsp;&nbsp;<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]</p>
																	
																		</div> 
																		<div ng-if="! indicatorMetadata.isHeadlineIndicator">
																			<p style="cursor:pointer;" style="color: white;" ng-attr-title="<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]" ng-click="onClickHierarchyIndicator(indicatorMetadata)"><i class="fas fa-sitemap"></i> &nbsp;&nbsp;<b>{{indicatorMetadata.indicatorName}}</b> [{{indicatorMetadata.unit}}]</p>
																	
																		</div>
																	</div>
																</div>
															</div>
															<div ng-show="!(($ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:mainTopic.topicId} | filter:indicatorNameFilter).length > 0)">
																<div class="list-group collapse" uib-collapse="isCollapsed_mainTopic">
																	<!-- <div class="list-group-item list-group-item-default" style="background: #eb9c98;">
																	 	<p><i class="fas fa-sitemap"></i> &nbsp;&nbsp;- keine Indikatoren in dieser Hierarchieebene -</p>
																	</div> -->
																</div>
															</div>


															<!-- <div ng-repeat="indicatorMetadata in $ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter:filterIndicators() | filter:{topicReference:mainTopic.topicId} | filter:indicatorNameFilter">
															</div> -->
														</div>
														<!-- end main Topics -->


													</div>

											</div>

											</uib-tab>
									    <uib-tab index="1" heading="Alphabetische Liste">
												<div class="just-padding">
													<select style="font-size: 12px;"
														size="30" ng-model="$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator" ng-options="indicator as indicator.indicatorName + ' [' + indicator.unit + ']' for indicator in $ctrl.kommonitorDataExchangeServiceInstance.availableIndicators | filter: filterIndicators() | filter:indicatorNameFilter"
														ng-change="onChangeSelectedIndicator()" class="form-control" required>
														<option disabled selected value> -- Indikator w&auml;hlen -- </option>
													</select>
												</div>
											</uib-tab>
									  </uib-tabset>

								</div>
								<!-- /.box-body -->
						</div>
						  <!-- /.box -->


						  <div class="box box-success collapsed-box">
							<div class="box-header with-border">
							  <h3 class="box-title">Indikatoren Metadaten</h3>
				
											<div class="box-tools pull-right">
												<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
												</button>
											</div>
							</div>
							<!-- /.box-header -->
							<!-- form start -->
							  <div class="box-body">
				
												<div id="indicatorMetadataOverview" text-align="center" align="center" class="">
				
												<table class="table table-condensed">
												<!-- <thead>
													<tr>
														<th>Name des Metadatums</th>
														<th>Beschreibung des Metadatums</th>
													</tr>
												</thead> -->
												<tbody>
													<tr>
														<td><b>Name</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.indicatorName}}</td>
													</tr>
													<tr>
														<td><b>Kategorie</b></td>
														<td ng-if="$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.isHeadlineIndicator">Leitindikator</td>
														<td ng-if="! $ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.isHeadlineIndicator">Subindikator</td>
													</tr>
													<tr>
														<td><b>Typ</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.indicatorType}}</td>
													</tr>
													<tr ng-if="$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.characteristicValue">
														<td><b>Merkmalsauspr&auml;gung</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.characteristicValue}}</td>
													</tr>
													<tr>
														<td><b>Kennzeichen/K&uuml;rzel</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.abbreviation}}</td>
													</tr>
													<tr>
														<td><b>Beschreibung</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.metadata.description}}</td>
													</tr>
													<tr>
														<td><b>Maßeinheit</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.unit}}</td>
													</tr>
													<tr>
														<td><b>Methodik</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.processDescription}}</td>
													</tr>
													<tr>
														<td><b>Interpretation</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.interpretation}}</td>
													</tr>
													<tr>
														<td><b>Datengrundlage</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.metadata.databasis}}</td>
													</tr>
													<tr>
														<td><b>Datenquelle</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.metadata.datasource}}</td>
													</tr>
													<tr>
														<td><b>Datenhalter und Kontakt</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.metadata.contact}}</td>
													</tr>
													<tr>
														<td><b>Bemerkung</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.metadata.note}}</td>
													</tr>
													<tr>
														<td><b>Fortführungsintervall</b></td>
														<td>{{$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.metadata.updateInterval}}</td>
													</tr>
												</tbody>
											</table>
				
													</div>
				
							  </div>
							  <!-- /.box-body -->
				  </div>
				  <!-- /.box -->
				
					<div ng-show="($ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.referencedIndicators.length > 0)" class="box box-danger collapsed-box">
							<div class="box-header with-border">
							  <h3 class="box-title">Verkn&uuml;pfte Indikatoren</h3>
				
											<div class="box-tools pull-right">
												<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
												</button>
											</div>
							</div>
							<!-- /.box-header -->
							<!-- form start -->
							  <div class="box-body">
				
												<div id="referencedIndicatorOverview" text-align="center" align="center" class="" ng-if="$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.referencedIndicators.length > 0">
				
												<table class="table table-condensed">
												<thead>
													<tr>
														<th>Name des Indikators</th>
														<th>K&uuml;rzel/Kennziffer</th>
														<th>Beschreibung der Verkn&uuml;pfung</th>
													</tr>
												</thead>
												<tbody>
													<tr ng-repeat="indicator in $ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.referencedIndicators">
														<td>{{indicator.referencedIndicatorName}}</td>
														<td ng-bind="$ctrl.kommonitorDataExchangeServiceInstance.getIndicatorAbbreviationFromIndicatorId(indicator.referencedIndicatorId)"></td>
														<td>{{indicator.referencedIndicatorDescription}}</td>
													</tr>
												</tbody>
											</table>
				
													</div>
				
							  </div>
							  <!-- /.box-body -->
				  </div>
				  <!-- /.box -->
				
				
					<div ng-show="($ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.referencedGeoresources.length > 0)" style="margin-bottom: 0px;" class="box box-danger collapsed-box">
							<div class="box-header with-border">
							  <h3 class="box-title">Verkn&uuml;pfte Georessourcen</h3>
				
											<div class="box-tools pull-right">
												<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i>
												</button>
											</div>
							</div>
							<!-- /.box-header -->
							<!-- form start -->
							  <div class="box-body">
				
													<div id="referencedGeoresourcesOverview" text-align="center" align="center" class="" ng-if="$ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.referencedGeoresources.length > 0">
													<h4>Verkn&uuml;pfte Georessourcen</h4>
				
													<table class="table table-condensed">
													<thead>
														<tr>
															<th>Name der Georessource</th>
															<th>Beschreibung der Verkn&uuml;pfung</th>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="georesource in $ctrl.kommonitorDataExchangeServiceInstance.selectedIndicator.referencedGeoresources">
															<td>{{georesource.referencedGeoresourceName}}</td>
															<td>{{georesource.referencedGeoresourceDescription}}</td>
														</tr>
													</tbody>
												</table>
				
														</div>
				
							  </div>
							  <!-- /.box-body -->
				  </div>
				  <!-- /.box -->
								  
</div>


	
