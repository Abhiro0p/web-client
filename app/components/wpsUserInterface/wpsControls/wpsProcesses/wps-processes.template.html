<div>
	<h3 class="justify" align="center">Interaktive parametrisierte Neuberechnung eines Indikators</h3>
	<div ng-if="!$ctrl.targetIndicator">
		<p>Bitte erst einen Indikator ausw&auml;hlen, der über ein Skript berechnet werden kann.</p>
	</div>

	<div>
		<select
			ng-model="$ctrl.targetIndicator" ng-options="indicator as indicator.indicatorName for indicator in $ctrl.wpsPropertiesServiceInstance.availableIndicators | filter:{creationType:'COMPUTATION'}"
			class="form-control" ng-change="&ctrl.onChangeTargetIndicator" required>
			<option value="" selected disabled>Indikator w&auml;hlen</option>
			<option
				ng-repeat="indicator in $ctrl.wpsPropertiesServiceInstance.availableIndicators | filter:{creationType:'COMPUTATION'}"></option>
		</select>
	</div>

	<br />

	<div ng-if="$ctrl.targetIndicator">
		<label>Zeitschnitt w&auml;hlen, f&uuml;r den der Indikator berechnet werden soll</label>
		<input type="date" name="date" min="2009-01-01" max="2018-10-01" value="2018-08-01" ng-model="$ctrl.targetDate" ng-init="$ctrl.targetDate = '2018-08-01'" ng-change="$ctrl.onTargetDateChange()"/>
		<p>targetDate as info: {{$ctrl.targetDate}}</p>
	</div>


	<div class="form-group" ng-if="$ctrl.targetIndicator">
		<label for="sel1">Raumebene w&auml;hlen, f&uuml;r die der Indikator berechnet werden soll</label>

		<!-- simple list of available processes -->
		<select
			ng-model="$ctrl.targetSpatialUnit" ng-options="spatialUnit as spatialUnit.spatialUnitLevel for spatialUnit in $ctrl.wpsPropertiesServiceInstance.availableSpatialUnits"
			class="form-control" required>
			<option value="" selected disabled>Raumeinheit w&auml;hlen</option>
			<option
				ng-repeat="spatialUnit in $ctrl.wpsPropertiesServiceInstance.availableSpatialUnits"></option>
		</select>
	</div>


	<div ng-if="$ctrl.targetIndicator && $ctrl.targetSpatialUnit && $ctrl.targetDate" id="parameterManagement" align="center">

		<div class="loading-overlay ng-hide" ng-show="loadingData">
        	<span class="glyphicon glyphicon-refresh icon-spin"></span>
    	</div>

		<div>
			<label align='left'>gew&auml;hlter Indikator:</label>
			<p>{{$ctrl.targetIndicator.indicatorName}}</p>
			<p>{{$ctrl.targetIndicator.processDescription}}</p>
		</div>

		<p></p>

		<div class="form-group">
			<label align='left'>parametrisierte Neuberechung</label>
			<p>Indikator mit anderen Parametern neu berechnen</p>

				<div id="processInputForm">
					<!-- here the content is filled programatically -->
				</div>

			  <button ng-click="$ctrl.calculateCustomIndicator()" class="btn btn-primary">individuelle Neuberechnung starten</button>

			<p>Laufzeit beträgt etwa 25 - 30 Sekunden! Das Ergebnis wird als GeoJSON-Dateidownload bereitgestellt.</p>

		</div>



		<!-- div for describeProcess failed messages! -->
		<div
			class="alert alert-danger {{$ctrl.wpsFormControlServiceInstance.describeProcessFailed_classAttribute}}">
			<strong>{{'wpsProcesses.describeProcessFailed_short' | translate}}!</strong>
			{{'wpsProcesses.describeProcessFailed_text' | translate}}
			<p></p>
			<p>
				<strong>{{'wpsProcesses.describeProcessFailed_errorThrown' |
					translate}}</strong>{{$ctrl.wpsFormControlServiceInstance.describeProcessFailed_errorThrown}}
			</p>
		</div>

		<!-- div for capabilities success messages! -->
		<div
			class="alert alert-success {{$ctrl.wpsFormControlServiceInstance.describeProcessSuccess_classAttribute}}">
			<strong>{{'wpsProcesses.describeProcessSuccess_short' |
				translate}}!</strong> {{'wpsProcesses.describeProcessSuccess_text' | translate}}
		</div>

	</div>


</div>
