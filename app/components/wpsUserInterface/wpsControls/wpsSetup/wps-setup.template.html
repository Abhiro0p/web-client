<div>
	<!-- <h3 class="justify" align="center">Datenangebot</h3> -->

	<!-- <p align="center">Bitte Layer gem&auml;&szlig; Kategorie zur Anzeige ausw&auml;hlen</p> -->

	<div class="loading-overlay ng-hide" ng-show="loadingData">
				<span class="glyphicon glyphicon-refresh icon-spin"></span>
		</div>

	<div class="form-group">
	<h4 class="justify" align="center">Thema und Zeitschnitt</h4>

		<label for="sel1">Thema w&auml;hlen (optional)</label>
		<p>Die Auswahl eines Themas filtert die verf&uuml;gbaren Datens&auml;tze der Georessourcen und Indikatoren.</p>

		<div>

			<div style="display: inline-block">
				<select
					ng-model="$ctrl.wpsPropertiesServiceInstance.selectedTopic" ng-options="topic as topic.topicName for topic in $ctrl.wpsPropertiesServiceInstance.availableTopics"
					class="form-control" required>
					<option value="" selected disabled>Thema ausw&auml;hlen</option>
					<option
						ng-repeat="topic in $ctrl.wpsPropertiesServiceInstance.availableTopics"></option>
				</select>

			</div>

			<div style="display: inline-block" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedTopic">
				<button type="button" class="btn btn-danger" ng-click="$ctrl.unsetTopic()" type="button">Auswahl aufheben</button>
			</div>

		</div>

		<div ng-if="$ctrl.wpsPropertiesServiceInstance.selectedTopic">
			<p>{{$ctrl.wpsPropertiesServiceInstance.selectedTopic.topicDescription}}</p>
		</div>


	</div>

	<div>
		<label>Zeitschnitt w&auml;hlen</label>
		<input type="date" name="date" min="2009-01-01" max="2018-10-01" value="2015-01-01" ng-model="$ctrl.selectedDate" ng-init="$ctrl.selectedDate = '2015-01-01'" ng-change="$ctrl.onDateChange()"/>
		<!-- <p>Selected Date as info: {{$ctrl.selectedDate}}</p> -->
	</div>

	<br/>

	<div class="form-group" ng-if="$ctrl.selectedDate">
	<h4 class="justify" align="center">Raumeinheiten</h4>

		<label for="sel1">Raumeinheiten zur Karte hinzuf&uuml;gen</label>

		<div>

			<!-- simple list of available processes -->
			<div style="display: inline-block">
				<select
					ng-model="$ctrl.wpsPropertiesServiceInstance.selectedSpatialUnit" ng-options="spatialUnit as spatialUnit.spatialUnitLevel for spatialUnit in $ctrl.wpsPropertiesServiceInstance.availableSpatialUnits"
					class="form-control" required>
					<option value="" selected disabled>Raumeinheit zur Karte hinzufügen</option>
					<option
						ng-repeat="spatialUnit in $ctrl.wpsPropertiesServiceInstance.availableSpatialUnits"></option>
				</select>
			</div>

			<div style="display: inline-block" align="center" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedSpatialUnit">
				<button align="center" ng-click="$ctrl.addSelectedSpatialUnitToMap()" type="button" class="btn btn-success">Kartenlayer hinzuf&uuml;gen</button>
				<!-- <button align="center" ng-click="$ctrl.addSelectedSpatialUnitToMapAsWFS()" type="button" class="btn btn-success">als WFS hinzuf&uuml;gen</button> -->

				<!-- <p></p>
				<div> -->
					<a class="btn btn-warning" target="_blank" rel="noopener noreferrer" ng-href="{{$ctrl.wpsPropertiesServiceInstance.selectedSpatialUnit.wmsUrl}}">WMS</a>
					<a class="btn btn-info" target="_blank" rel="noopener noreferrer" ng-href="{{$ctrl.wpsPropertiesServiceInstance.selectedSpatialUnit.wfsUrl}}">WFS</a>
				<!-- </div> -->
			</div>

		</div>
	</div>

	<br/>

	<div class="form-group" ng-if="$ctrl.selectedDate">
	<h4 class="justify" align="center">Georessourcen</h4>

		<label for="sel1">Georessourcen zur Karte hinzuf&uuml;gen</label>

		<div>

			<div style="display: inline-block">

				<!-- simple list of available processes -->
				<select
					ng-model="$ctrl.wpsPropertiesServiceInstance.selectedGeoresource" ng-options="georesource as georesource.datasetName for georesource in $ctrl.wpsPropertiesServiceInstance.availableGeoresources | filter:filterGeoresourcesByTopic()"
					class="form-control" required>
					<option value="" selected disabled>Georessource zur Karte hinzufügen</option>
					<option
						ng-repeat="georesource in $ctrl.wpsPropertiesServiceInstance.availableGeoresources | filter:filterGeoresourcesByTopic()"></option>
				</select>
			</div>

			<div style="display: inline-block" align="center" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedGeoresource">
				<button align="center"  ng-click="$ctrl.addSelectedGeoresourceToMap()" type="button" class="btn btn-success">Kartenlayer hinzuf&uuml;gen</button>
					<a class="btn btn-warning" target="_blank" rel="noopener noreferrer" ng-href="{{$ctrl.wpsPropertiesServiceInstance.selectedGeoresource.wmsUrl}}">WMS</a>
					<a class="btn btn-info" target="_blank" rel="noopener noreferrer" ng-href="{{$ctrl.wpsPropertiesServiceInstance.selectedGeoresource.wfsUrl}}">WFS</a>
			</div>

		</div>
	</div>

	<br/>

	<div class="form-group">
	<h4 class="justify" align="center">Indikatoren</h4>

		<label for="sel1">Indikatoren zur Karte hinzuf&uuml;gen</label>

		<p ng-if="! ($ctrl.selectedDate && $ctrl.wpsPropertiesServiceInstance.selectedSpatialUnit)">Bitte vorab Raumebene und Zeitschnitt ausw&auml;hlen</p>

		<!-- simple list of available processes -->
		<div>
			<div style="display: inline-block" ng-if="$ctrl.selectedDate && $ctrl.wpsPropertiesServiceInstance.selectedSpatialUnit">
				<select
					ng-model="$ctrl.wpsPropertiesServiceInstance.selectedIndicator" ng-options="indicator as indicator.indicatorName for indicator in $ctrl.wpsPropertiesServiceInstance.availableIndicators | filter:filterIndicatorsByTopic()"
					ng-change="$ctrl.wpsPropertiesServiceInstance.onChangeSelectedIndicator()" class="form-control" required>
					<option value="" selected disabled>Indikator zur Karte hinzufügen</option>
					<option
						ng-repeat="indicator in $ctrl.wpsPropertiesServiceInstance.availableIndicators | filter:filterIndicatorsByTopic()"></option>
				</select>
			</div>

			<div style="display: inline-block" align="center" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicator">

				<button ng-click="$ctrl.addSelectedIndicatorToMap()" type="button" class="btn btn-success">Kartenlayer hinzuf&uuml;gen</button>
					<!-- <div ng-if="$ctrl.wpsPropertiesServiceInstance.wmsUrlForSelectedIndicator && $ctrl.wpsPropertiesServiceInstance.wfsUrlForSelectedIndicator"> -->
						<a class="btn btn-warning" target="_blank" rel="noopener noreferrer" ng-href="{{wmsUrlForSelectedIndicator}}">WMS</a>
						<a class="btn btn-info" target="_blank" rel="noopener noreferrer" ng-href="{{wfsUrlForSelectedIndicator}}">WFS</a>
					<!-- </div> -->
			</div>
		</div>


		<div align="center" class="form-group" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicator">

			<br/>

			<input type="checkbox">Eigenen Wertmaßstab mittels Grenzwert festlegen?</input>

			<div>

				<label align='left'>Bewertungsmodellierung</label>
				<p>Eigenen Wertma&szlig;stab anwenden. Durch verschieben des Grenzwertes werden die dargestellten Indikatoren-Features unmittelbar neu eingef&auml;rbt.</p>

				<p></p>

				<div class="slidecontainer">
				  <input ng-model="$ctrl.wpsPropertiesServiceInstance.measureOfValue" ng-change="$ctrl.onMeasureOfValueChange()" type="range" min="0" max="100" step="1" value="51" class="slider" id="myRange">

				  <p>Value: {{$ctrl.wpsPropertiesServiceInstance.measureOfValue}}</p>
				</div>

			</div>

		</div>

	</div>


	<!-- <div style="display: inline-block">
		<button type="button" class="btn btn-danger" ng-click="$ctrl.addGeopackage()" type="button">Add GeoPackage</button>
	</div>
	<div style="display: inline-block">
		<button type="button" class="btn btn-danger" ng-click="$ctrl.addGeoJSON()" type="button">Add GeoJSON</button>
	</div> -->

		<div align="center" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicatorLegendURL">
			<label align='left'>gewählter Indikator:</label>
			<p>{{$ctrl.wpsPropertiesServiceInstance.selectedIndicator.name}}</p>
		</div>

		<div class="form-group" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicatorLegendURL">
			<h4 class="justify" align="center">Indikator Legende</h4>

			<p>{{$ctrl.wpsPropertiesServiceInstance.selectedIndicator.layerLegendText}}</p>

		</div>

		<hr ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicatorLegendURL"/>

		<div align="center" class="form-group" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicatorLegendURL">
			<label align='left'>Bewertungsmodellierung</label>
			<p>{{$ctrl.wpsPropertiesServiceInstance.selectedIndicator.measureOfValueText}}</p>

			<p></p>

			<div class="slidecontainer">
			  <input ng-model="$ctrl.wpsPropertiesServiceInstance.measureOfValue" ng-change="$ctrl.onMeasureOfValueChange()" type="range" min="0" max="100" step="1" value="51" class="slider" id="myRange">

			  <p>Value: {{$ctrl.wpsPropertiesServiceInstance.measureOfValue}}</p>
			</div>

			<button ng-if="$ctrl.wpsPropertiesServiceInstance.measureOfValue" align="center" ng-click="$ctrl.applyMeasureOfValue()" type="button" class="btn btn-success">Bewertung anwenden!</button>


			<div>
				<p>Das Ergebnis sollte als neuer Layer der Karte hinzugefügt werden.</p>
			</div>

		</div>

</div>
