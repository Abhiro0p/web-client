<div>
	<!-- <h3 class="justify" align="center">Datenangebot</h3> -->

	<!-- <p align="center">Bitte Layer gem&auml;&szlig; Kategorie zur Anzeige ausw&auml;hlen</p> -->

	<div class="loading-overlay ng-hide" ng-show="loadingData">
				<span class="glyphicon glyphicon-refresh icon-spin"></span>
		</div>

	<div class="form-group" align="center">
	<h4 class="justify" align="center">Themen</h4>

		<!-- <label for="sel1">Thema w&auml;hlen (optional)</label> -->
		<p>Die Auswahl eines Themas filtert die verf&uuml;gbaren Datens&auml;tze der Georessourcen und Indikatoren.</p>

		<div>

			<div style="display: inline-block" align="center">
				<select
					ng-model="$ctrl.wpsPropertiesServiceInstance.selectedTopic" ng-options="topic as topic.topicName for topic in $ctrl.wpsPropertiesServiceInstance.availableTopics"
					class="form-control" required>
					<option value="" selected disabled>Thema ausw&auml;hlen</option>
					<option
						ng-repeat="topic in $ctrl.wpsPropertiesServiceInstance.availableTopics"></option>
				</select>

			</div>

			<div style="display: inline-block" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedTopic">
				<button type="button" class="btn btn-danger" ng-click="$ctrl.unsetTopic()" type="button">Auswahl aufheben</button>
			</div>

		</div>

		<div ng-if="$ctrl.wpsPropertiesServiceInstance.selectedTopic">
			<p>{{$ctrl.wpsPropertiesServiceInstance.selectedTopic.topicDescription}}</p>
		</div>
	</div>

	<br/>

	<div class="form-group">
	<h4 class="justify" align="center">Verf&uuml;gbare Indikatoren und Raumebenen</h4>

		<div text-align="center" align="center">

			<!-- <label  for="sel1">verf&uuml;gbare Indikatoren</label> -->

			<div text-align="center" align="center" style="display: inline-block">
					<select
						ng-model="$ctrl.wpsPropertiesServiceInstance.selectedIndicator" ng-options="indicator as indicator.indicatorName for indicator in $ctrl.wpsPropertiesServiceInstance.availableIndicators | filter:filterIndicatorsByTopic()"
						ng-change="$ctrl.onChangeSelectedIndicator()" class="form-control" required>
						<option value="" selected disabled>Indikator w&auml;hlen</option>
						<option
							ng-repeat="indicator in $ctrl.wpsPropertiesServiceInstance.availableIndicators | filter:filterIndicatorsByTopic()"></option>
					</select>
			</div>

			<div text-align="center" align="center" style="display: inline-block" ng-show="$ctrl.wpsPropertiesServiceInstance.selectedIndicator">
				<select
					ng-model="$ctrl.wpsPropertiesServiceInstance.selectedSpatialUnit" ng-change="$ctrl.onChangeSelectedSpatialUnit()" ng-options="spatialUnit as spatialUnit.spatialUnitLevel for spatialUnit in filteredSpatialUnits = ($ctrl.wpsPropertiesServiceInstance.availableSpatialUnits | filter:filterSpatialUnitsByIndicator())"
					class="form-control" required>
				</select>
			</div>

		</div>

		<br/>
		<br/>

			<div align="center" ng-show="$ctrl.wpsPropertiesServiceInstance.selectedIndicator">
				<label>verf&uuml;gbare Zeitschnitte</label>
					<!-- here construct a time slider with values and labels for each date within selectedIndicator.applicableDates -->
				<div id="dateSlider" class="rangeslide"></div>
			</div>

			<br/>
			<br/>
			<br/>

			<div align="center" ng-show="$ctrl.selectedDate && $ctrl.wpsPropertiesServiceInstance.selectedSpatialUnit">

				<button ng-click="$ctrl.addSelectedIndicatorToMap()" type="button" class="btn btn-success">Indikator als Kartenlayer hinzuf&uuml;gen</button>
					<!-- <div ng-if="$ctrl.wpsPropertiesServiceInstance.wmsUrlForSelectedIndicator && $ctrl.wpsPropertiesServiceInstance.wfsUrlForSelectedIndicator"> -->
						<!-- <a class="btn btn-warning" target="_blank" rel="noopener noreferrer" ng-href="{{wmsUrlForSelectedIndicator}}">WMS-Export</a>
						<a class="btn btn-info" target="_blank" rel="noopener noreferrer" ng-href="{{wfsUrlForSelectedIndicator}}">WFS-Export</a> -->
					<!-- </div> -->

					<div class="dropdown">
					  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Export
					  <span class="caret"></span></button>
					  <ul id="exportDropdown" class="dropdown-menu">
					    <li><a  target="_blank" rel="noopener noreferrer" ng-href="{{wmsUrlForSelectedIndicator}}">Web Map Service</a></li>
					    <li><a  target="_blank" rel="noopener noreferrer" ng-href="{{wfsUrlForSelectedIndicator}}">Web Feature Service</a></li>

					  </ul>
					</div>
			</div>


		<div align="center" class="form-group" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicator">

			<br/>

			<input id="measureOfValueCheckbox" type="checkbox" ng-model="$ctrl.wpsPropertiesServiceInstance.isMeasureOfValueChecked" ng-checked="$ctrl.wpsPropertiesServiceInstance.isMeasureOfValueChecked">Eigenen Wertmaßstab mittels Grenzwert festlegen?</input>

			<div ng-show="$ctrl.wpsPropertiesServiceInstance.isMeasureOfValueChecked">

				<label align='left'>Bewertungsmodellierung</label>
				<p>Eigenen Wertma&szlig;stab anwenden. Durch verschieben des Grenzwertes werden die dargestellten Indikatoren-Features unmittelbar neu eingef&auml;rbt.</p>

				<p></p>

				<div class="slidecontainer">
					<input ng-model="$ctrl.wpsPropertiesServiceInstance.measureOfValue" ng-change="$ctrl.onMeasureOfValueChange()" type="range" min="0" max="100" step="1" value="51" class="slider" id="measureOfValueInput">

					<p>Value: {{$ctrl.wpsPropertiesServiceInstance.measureOfValue}}</p>
				</div>

			</div>

		</div>

	</div>





	<br/>

	<br/>

	<div class="form-group" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicator.referencedGeoresources.length > 0">
	<h4 class="justify" align="center">Mit Indikator verkn&uuml;pfte Geodaten</h4>

		<label for="sel1">Georessourcen zur Karte hinzuf&uuml;gen</label>

		<div>

			<div style="display: inline-block">

				<!-- simple list of available processes -->
				<select
					ng-model="$ctrl.wpsPropertiesServiceInstance.selectedGeoresource"
					class="form-control" required>
					<option value="" selected disabled>Georessource zur Karte hinzufügen</option>
					<option
						ng-repeat="georesource in $ctrl.wpsPropertiesServiceInstance.availableGeoresources | filter:filterGeoresourcesByIndicator()"></option>
				</select>
			</div>

			<div style="display: inline-block" align="center" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedGeoresource">
				<button align="center"  ng-click="$ctrl.addSelectedGeoresourceToMap()" type="button" class="btn btn-success">Kartenlayer hinzuf&uuml;gen</button>
					<a class="btn btn-warning" target="_blank" rel="noopener noreferrer" ng-href="{{$ctrl.wpsPropertiesServiceInstance.selectedGeoresource.wmsUrl}}">WMS</a>
					<a class="btn btn-info" target="_blank" rel="noopener noreferrer" ng-href="{{$ctrl.wpsPropertiesServiceInstance.selectedGeoresource.wfsUrl}}">WFS</a>
			</div>

		</div>
	</div>

	<br/>










	<!-- <div style="display: inline-block">
		<button type="button" class="btn btn-danger" ng-click="$ctrl.addGeopackage()" type="button">Add GeoPackage</button>
	</div>
	<div style="display: inline-block">
		<button type="button" class="btn btn-danger" ng-click="$ctrl.addGeoJSON()" type="button">Add GeoJSON</button>
	</div> -->

		<div align="center" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicatorLegendURL">
			<label align='left'>gewählter Indikator:</label>
			<p>{{$ctrl.wpsPropertiesServiceInstance.selectedIndicator.name}}</p>
		</div>

		<div class="form-group" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicatorLegendURL">
			<h4 class="justify" align="center">Indikator Legende</h4>

			<p>{{$ctrl.wpsPropertiesServiceInstance.selectedIndicator.layerLegendText}}</p>

		</div>

		<hr ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicatorLegendURL"/>

		<div align="center" class="form-group" ng-if="$ctrl.wpsPropertiesServiceInstance.selectedIndicatorLegendURL">
			<label align='left'>Bewertungsmodellierung</label>
			<p>{{$ctrl.wpsPropertiesServiceInstance.selectedIndicator.measureOfValueText}}</p>

			<p></p>

			<div class="slidecontainer">
			  <input ng-model="$ctrl.wpsPropertiesServiceInstance.measureOfValue" ng-change="$ctrl.onMeasureOfValueChange()" type="range" min="0" max="100" step="1" value="51" class="slider" id="myRange">

			  <p>Value: {{$ctrl.wpsPropertiesServiceInstance.measureOfValue}}</p>
			</div>

			<button ng-if="$ctrl.wpsPropertiesServiceInstance.measureOfValue" align="center" ng-click="$ctrl.applyMeasureOfValue()" type="button" class="btn btn-success">Bewertung anwenden!</button>


			<div>
				<p>Das Ergebnis sollte als neuer Layer der Karte hinzugefügt werden.</p>
			</div>

		</div>

</div>
